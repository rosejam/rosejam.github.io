---
title: "AWS입문(1)-인스턴스 시작"
date: 2020-04-01T00:12:00-09:00
categories:
  - AWS
tags:
  - 서버
  - 환경설정
  - 우분투
---

이 포스팅에서는 AWS의 12개월 프리 티어를 무료로 활용하는 법 위주로 설명한다.    
https://aws.amazon.com/ko/ 에서 회원가입 및 로그인을한다.    

일단 계정을 만들었으면 EC2인스턴스를 하나 만들어서 원격 컴퓨터로 활용할 수 있다.    
프리티어는 t2.micro 한대로 한달내내 켜놓을 수 있다.(750시간 이하)    

0단계
=====
일단 우측 상단의 지역이 "서울"로 되어있는지 확인하고 아니면 바꾼다.    
EC2의 인스턴스 시작 버튼을 누른다.    

1단계
=====
<img src="/assets/images/1.png" width="90%" height="90%" title="1단계" alt="RubberDuck"/>    
나는 Ubuntu 18.04버전(Bionic Beaver)을 사용하였다.    

2단계
=====
<img src="/assets/images/2.png" width="90%" height="90%"/>    
당연히 프리티어 사용 가능인 t2.micro를 선택하고 검토 및 시작이 아닌 "다음"을 누른다.    
(무료라 그런지 RAM이 1G밖에 안된다ㅜ)    

3단계(인스턴스 구성)
====================
<img src="/assets/images/3.png" width="90%" height="90%"/>    
이 설정들은 기본으로 두고 다음을 누른다.    

4단계(스토리지 추가)
====================
<img src="/assets/images/4.png" width="90%" height="90%"/>    
크기는 8G라고 쓰여있는데 30G까지 무료로 이용할 수 있다.    
(나중에 줄이는것은 몰라도 늘리는 것은 쉬우니 필요한만큼 선택하자.)    
그리고 종료 시 삭제에 체크가 되어있어야 나중에 종료 후 요금이 청구되지 않는다.    

5단계
=====
<img src="/assets/images/5.png" width="90%" height="90%"/>    
중요한 부분은 아니지만 인스턴스나 스토리지에 태그를 붙인다.    

6단계(보안 그룹 구성)
=====================
<img src="/assets/images/6.png" width="90%" height="90%"/>    
여기가 중요한 부분인데 SSH유형의 소스를 0.0.0.0/0으로 내버려 두었다간 내 키가 실수로 유출되었을 때 요금 폭탄이 터질 수 있다. (키는 꼭 조심히 보관하고 깃에 올라가지 않도록 한다!)    
소스를 내가 키를 이용해서 터미널로 접속할 컴퓨터의 ip로 수정해 준다.    
(내 IP를 누르면 자동으로 지금 IP가 입력된다.)    
웹서비스로 이용할 것이라면 캡처와 같이 https와 http를 열어둔다.    

7단계
=====
검토 및 시작을 누르고 내용을 확인한 후 시작을 다시 누른다.    
일단 이것으로 EC2인스턴스는 생성 완료되었고 aws에서 나에게 이 인스턴스에 접속할 수 있는 키 페어를 생성해 줄 것이다.    
키 페어 파일(.pem)을 다운받아 내 컴퓨터에 잘 보관해놓는다.    

8단계(EIP 등록)
===============
<img src="/assets/images/8.png" width="90%" height="90%"/>    
인스턴스가 재시작되어도 인스턴스의 ip주소가 변하지 않도록 aws의 고정 IP인 Elastic IP를 등록해주어야 한다.    
네트워크 및 보안 탭의 탄력적 IP를 클릭하고 주소 할당을 누른다.    
Amazon의 IPv4 주소 풀에서 주소를 할당받는다.    
그 다음 인스턴스에는 방금 생성한 EC2 인스턴스를 선택하고, 프라이빗 IP에는 방금 생성한 탄력적 IP를 선택하고 연결버튼을 클릭한다.    
다시 인스턴스 탭으로 돌아가 아래 설명에서 "탄력적 IP"가 잘 적용되었는지 꼭 확인해준다!    

9단계(SSH 접속)
===============
아까 받은 키페어 .pem파일로 터미널을 통해 EC2에 접속할 수 있다.    
```
chmod 400 키페어이름.pem
```
위 명령어로 다운받은 키페어의 권한을 수정해준다.    
그후 .pem파일을 ~/.ssh/경로(또는 다른곳)에 넣고 아래 명령어를 실행한다.    
```
ssh -i '~/.ssh/키페어이름.pem' ubuntu@퍼블릭IP
```
(퍼블릭ip에는 아까 연결한 EIP를 적는다.)    
터미널상에서 ubuntu@ip-프라이빗IP: 가 줄에 뜨면 EC2에 SSH로 원격 접속 한것이다!    

10단계(계정MFA설정 - 선택)
==========================
보안을 위해 aws로그인 시 OTP앱으로 더블첵을 하는 기능인데 해주면 더 안전하고 좋다.    